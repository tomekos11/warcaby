from channels.generic.websocket import AsyncWebsocketConsumer
import json
import asyncio
import time


class YourConsumer(AsyncWebsocketConsumer):
    async def connect(self):
        await self.accept()
        await self.channel_layer.group_add("some_group", self.channel_name)

    async def disconnect(self, close_code):
        pass

    async def receive(self, text_data):
        # text_data_json = json.loads(text_data)
        # message = text_data_json['message']

        # await self.send(text_data=json.dumps({
        #     'message': 'Personalizowna wiadomosc' + str(time.time())
        # }))

        await self.send(text_data=json.dumps({
            'moves': [
                [
                    {
                        "0": {"0": 0, "1": 0, "2": 0, "3": -1, "4": 0, "5": 0, "6": 0, "7": 0},
                        "1": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "2": {"0": 0, "1": 0, "2": 0, "3": 1, "4": 0, "5": 0, "6": 0, "7": 0},
                        "3": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "4": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": -2},
                        "5": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "6": {"0": 0, "1": 1, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 2},
                        "7": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0}
                    },
                    {
                        "0": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "1": {"0": 0, "1": 0, "2": 0, "3": 0, "4": -1, "5": 0, "6": 0, "7": 0},
                        "2": {"0": 0, "1": 0, "2": 0, "3": 1, "4": 0, "5": 0, "6": 0, "7": 0},
                        "3": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "4": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": -2},
                        "5": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "6": {"0": 0, "1": 1, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 2},
                        "7": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0}
                    },
                    {
                        "0": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "1": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "2": {"0": 0, "1": 0, "2": 0, "3": 1, "4": 0, "5": 0, "6": 0, "7": 0},
                        "3": {"0": 0, "1": 0, "2": -1, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "4": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": -2},
                        "5": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "6": {"0": 0, "1": 1, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 2},
                        "7": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0}
                    },
                    {
                        "0": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "1": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "2": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "3": {"0": 0, "1": 0, "2": -1, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "4": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": -2},
                        "5": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "6": {"0": 0, "1": 1, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 2},
                        "7": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0}
                    }
                ],
                [
                    {
                        "0": {"0": 0, "1": 0, "2": 0, "3": -1, "4": 0, "5": 0, "6": 0, "7": 0},
                        "1": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "2": {"0": 0, "1": 0, "2": 0, "3": 1, "4": 0, "5": 0, "6": 0, "7": 0},
                        "3": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "4": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": -2},
                        "5": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "6": {"0": 0, "1": 1, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 2},
                        "7": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0}
                    },
                    {
                        "0": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "1": {"0": 0, "1": 0, "2": -1, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "2": {"0": 0, "1": 0, "2": 0, "3": 1, "4": 0, "5": 0, "6": 0, "7": 0},
                        "3": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "4": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": -2},
                        "5": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "6": {"0": 0, "1": 1, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 2},
                        "7": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0}
                    },
                    {
                        "0": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "1": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "2": {"0": 0, "1": 0, "2": 0, "3": 1, "4": 0, "5": 0, "6": 0, "7": 0},
                        "3": {"0": 0, "1": 0, "2": 0, "3": 0, "4": -1, "5": 0, "6": 0, "7": 0},
                        "4": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": -2},
                        "5": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "6": {"0": 0, "1": 1, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 2},
                        "7": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0}
                    },
                    {
                        "0": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "1": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "2": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "3": {"0": 0, "1": 0, "2": 0, "3": 0, "4": -1, "5": 0, "6": 0, "7": 0},
                        "4": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": -2},
                        "5": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0},
                        "6": {"0": 0, "1": 1, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 2},
                        "7": {"0": 0, "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0}
                    }
                ]
            ]
        }))
